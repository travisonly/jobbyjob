<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobbyjob - ATS Analysis & Prompt Generator</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container { max-width: 1400px; margin: 0 auto; }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }
        
        .input-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        h2 { font-size: 20px; color: #333; }
        
        .upload-btn {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        
        .upload-btn:hover { background: #5568d3; }
        
        input[type="file"] { display: none; }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            resize: vertical;
            line-height: 1.5;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .analyze-btn {
            background: linear-gradient(135deg, #22c55e 0%, #10b981 100%);
            color: white;
            padding: 16px 40px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
            transition: all 0.2s;
        }
        
        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.6);
        }
        
        .analyze-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .score-card {
            text-align: center;
            padding: 25px;
            border-radius: 12px;
            border: 3px solid;
        }
        
        .score-card.excellent { background: #f0fdf4; border-color: #22c55e; }
        .score-card.good { background: #fefce8; border-color: #eab308; }
        .score-card.poor { background: #fef2f2; border-color: #ef4444; }
        
        .score-number {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .score-number.excellent { color: #22c55e; }
        .score-number.good { color: #eab308; }
        .score-number.poor { color: #ef4444; }
        
        .score-label {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        
        .issue-list {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .issue-list h3 {
            color: #991b1b;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .issue-list ul {
            list-style: none;
            padding: 0;
        }
        
        .issue-list li {
            padding: 8px 0;
            color: #7f1d1d;
            border-bottom: 1px solid #fee2e2;
        }
        
        .issue-list li:last-child { border-bottom: none; }
        
        .keyword-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .keyword-box {
            padding: 20px;
            border-radius: 8px;
        }
        
        .keyword-box.matched {
            background: #f0fdf4;
            border: 2px solid #22c55e;
        }
        
        .keyword-box.missing {
            background: #fef2f2;
            border: 2px solid #ef4444;
        }
        
        .keyword-box h4 {
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .keyword-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .keyword-tag {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .keyword-tag.matched {
            background: #bbf7d0;
            color: #166534;
        }
        
        .keyword-tag.missing {
            background: #fecaca;
            color: #991b1b;
        }
        
        .prompt-box {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            position: relative;
        }
        
        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .prompt-header h3 {
            font-size: 18px;
            color: #374151;
        }
        
        .copy-btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        
        .copy-btn:hover { background: #5568d3; }
        
        .prompt-content {
            background: white;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
        }
        
        .empty-state svg {
            width: 80px;
            height: 80px;
            color: #667eea;
            margin-bottom: 20px;
        }
        
        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-weight: 600;
        }
        
        .hidden { display: none; }
        
        .char-count {
            margin-top: 8px;
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Jobbyjob</h1>
            <p>ATS Resume Analysis & AI Prompt Generator</p>
        </div>

        <!-- Input Section -->
        <div class="grid">
            <div class="card">
                <div class="input-header">
                    <h2>üìÑ Your Resume</h2>
                    <label class="upload-btn">
                        üì§ Upload
                        <input type="file" id="resume-file" accept=".txt,.pdf,.doc,.docx">
                    </label>
                </div>
                <textarea id="resume" rows="20" placeholder="Paste your resume here or upload a file..."></textarea>
                <div class="char-count"><span id="resume-count">0</span> words</div>
            </div>

            <div class="card">
                <div class="input-header">
                    <h2>üéØ Job Description</h2>
                    <label class="upload-btn">
                        üì§ Upload
                        <input type="file" id="jd-file" accept=".txt,.pdf,.doc,.docx">
                    </label>
                </div>
                <textarea id="jd" rows="20" placeholder="Paste the job description here or upload a file..."></textarea>
                <div class="char-count"><span id="jd-count">0</span> words</div>
            </div>
        </div>

        <div class="card">
            <button id="analyze-btn" class="analyze-btn" onclick="analyzeResume()">
                üîç Analyze Resume
            </button>
        </div>

        <!-- Results Section -->
        <div id="results"></div>
    </div>

    <script>
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        let resumeText = '';
        let jdText = '';
        let analysis = null;

        // Update word counts
        document.getElementById('resume').addEventListener('input', (e) => {
            resumeText = e.target.value;
            updateCount('resume-count', resumeText);
            updateAnalyzeButton();
        });

        document.getElementById('jd').addEventListener('input', (e) => {
            jdText = e.target.value;
            updateCount('jd-count', jdText);
            updateAnalyzeButton();
        });

        function updateCount(id, text) {
            const words = text.trim().split(/\s+/).filter(w => w).length;
            document.getElementById(id).textContent = words;
        }

        function updateAnalyzeButton() {
            const btn = document.getElementById('analyze-btn');
            btn.disabled = !resumeText || !jdText;
        }

        // File Upload
        document.getElementById('resume-file').addEventListener('change', (e) => handleFileUpload(e, 'resume'));
        document.getElementById('jd-file').addEventListener('change', (e) => handleFileUpload(e, 'jd'));

        async function handleFileUpload(e, type) {
            const file = e.target.files[0];
            if (!file) return;

            const btn = document.getElementById('analyze-btn');
            btn.textContent = '‚è≥ Reading file...';
            btn.disabled = true;

            try {
                const ext = file.name.split('.').pop().toLowerCase();
                let text = '';

                if (ext === 'pdf') {
                    text = await extractPDF(file);
                } else if (ext === 'docx') {
                    text = await extractDOCX(file);
                } else {
                    text = await file.text();
                }

                if (type === 'resume') {
                    document.getElementById('resume').value = text;
                    resumeText = text;
                    updateCount('resume-count', text);
                } else {
                    document.getElementById('jd').value = text;
                    jdText = text;
                    updateCount('jd-count', text);
                }

                btn.textContent = 'üîç Analyze Resume';
                updateAnalyzeButton();
            } catch (err) {
                alert('Error reading file: ' + err.message);
                btn.textContent = 'üîç Analyze Resume';
                btn.disabled = false;
            }
        }

        async function extractPDF(file) {
            const arrayBuffer = await file.arrayBuffer();
            const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
            let text = '';
            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                const pageText = content.items.map(item => item.str).join(' ');
                text += pageText + '\n';
            }
            return text;
        }

        async function extractDOCX(file) {
            const arrayBuffer = await file.arrayBuffer();
            const result = await mammoth.extractRawText({ arrayBuffer });
            return result.value;
        }

        // Analysis
        function analyzeResume() {
            const btn = document.getElementById('analyze-btn');
            btn.textContent = '‚è≥ Analyzing...';
            btn.disabled = true;

            setTimeout(() => {
                analysis = performAnalysis();
                displayResults();
                btn.textContent = 'üîç Analyze Resume';
                btn.disabled = false;
            }, 500);
        }

        function performAnalysis() {
            const result = {
                scores: {},
                issues: [],
                keywords: { matched: [], missing: [] },
                weakBullets: [],
                formatIssues: [],
                bulletStats: { total: 0, withMetrics: 0 }
            };

            // KEYWORD ANALYSIS (Most Important)
            const jdKeywords = extractKeywords(jdText);
            const resumeKeywords = extractKeywords(resumeText);
            const resumeSet = new Set(resumeKeywords.map(k => k[0]));

            result.keywords.matched = jdKeywords.filter(([word]) => resumeSet.has(word)).map(k => k[0]);
            result.keywords.missing = jdKeywords.filter(([word]) => !resumeSet.has(word)).slice(0, 20).map(k => k[0]);

            const keywordScore = jdKeywords.length > 0 ? Math.round((result.keywords.matched.length / jdKeywords.length) * 100) : 0;
            result.scores.keywords = keywordScore;

            // SECTION DETECTION
            const sections = {
                contact: /@|email|phone|\d{3}[-\s]?\d{3}[-\s]?\d{4}/.test(resumeText),
                summary: /summary|objective|profile|about/i.test(resumeText),
                experience: /experience|employment|work history|professional background/i.test(resumeText),
                education: /education|degree|university|college|bachelor|master/i.test(resumeText),
                skills: /skills|technical skills|competencies|proficiencies/i.test(resumeText)
            };

            const missingSections = [];
            Object.entries(sections).forEach(([name, present]) => {
                if (!present) {
                    missingSections.push(`Missing or unclear ${name.charAt(0).toUpperCase() + name.slice(1)} section`);
                }
            });

            if (missingSections.length > 0) {
                result.issues.push(...missingSections);
            }

            const sectionsFound = Object.values(sections).filter(v => v).length;
            result.scores.structure = Math.round((sectionsFound / 5) * 100);

            // BULLET POINT & METRICS ANALYSIS (FIXED)
            const lines = resumeText.split('\n').map(l => l.trim()).filter(l => l);
            
            // Detect bullets more broadly - look for lines that start with bullet indicators OR are indented
            const bullets = lines.filter(line => {
                // Check if line starts with common bullet indicators
                if (/^[‚Ä¢\-\*‚óè‚óã‚ó¶‚ñ™‚ñ´¬∑‚Ä£‚ÅÉ‚Üí‚ûî‚û¢‚û£‚û§‚û•‚û¶‚ûß‚û®‚û©]\s/.test(line)) return true;
                // Check if line looks like a bullet (short, action-oriented)
                if (line.match(/^(Led|Managed|Developed|Created|Implemented|Improved|Increased|Decreased|Built|Designed|Launched|Achieved|Delivered|Coordinated|Established|Executed|Optimized|Spearheaded|Reduced|Generated|Drove|Directed)/i)) return true;
                // Check if line has numbers and action verbs (likely a bullet)
                if (/\d+/.test(line) && /ed\b|ing\b/i.test(line) && line.length < 200) return true;
                return false;
            });

            result.bulletStats.total = bullets.length;

            // Detect metrics: numbers, percentages, dollar amounts, time periods
            const metricsPattern = /\d+[%$KkMm]?|\d+\s*(percent|years?|months?|weeks?|days?|hours?|times?|x|people|employees|clients|customers|users|projects?|million|thousand|billion)|\$\d+|[\d,]+\+?/i;
            
            const bulletsWithMetrics = bullets.filter(bullet => metricsPattern.test(bullet));
            result.bulletStats.withMetrics = bulletsWithMetrics.length;

            const quantifiedPercent = bullets.length > 0 ? Math.round((bulletsWithMetrics.length / bullets.length) * 100) : 0;
            result.scores.quantified = quantifiedPercent;

            // Identify weak bullets (no metrics)
            const bulletsWithoutMetrics = bullets.filter(bullet => !metricsPattern.test(bullet));
            result.weakBullets = bulletsWithoutMetrics.slice(0, 5);

            if (quantifiedPercent < 50 && bullets.length > 0) {
                result.issues.push(`Only ${quantifiedPercent}% of your accomplishment bullets include metrics - aim for 70%+`);
            }

            // FORMAT ISSUES (Only Real Problems)
            // Check for actual ATS-breaking elements, not just plain text issues
            const hasComplexTables = /\|{3,}/.test(resumeText) || (resumeText.match(/\|/g) || []).length > 10;
            const hasProblematicChars = (resumeText.match(/[‚òÖ‚òÜ‚ô¶‚óÜ‚ñ†‚ñ°‚ñ™‚ñ´]/g) || []).length > 10;
            
            if (hasComplexTables) {
                result.formatIssues.push('Complex tables detected - ATS systems struggle with these');
            }
            if (hasProblematicChars) {
                result.formatIssues.push('Excessive special characters may cause parsing issues');
            }
            if (resumeText.length < 250) {
                result.formatIssues.push('Resume is too brief - add more detail about your experience');
            }
            if (!/@/.test(resumeText)) {
                result.formatIssues.push('Email address not detected');
            }
            if (!/\d{3}[-\s]?\d{3}[-\s]?\d{4}/.test(resumeText)) {
                result.formatIssues.push('Phone number not detected');
            }

            result.scores.formatting = result.formatIssues.length === 0 ? 100 : Math.max(60, 100 - (result.formatIssues.length * 15));

            // MISSING KEYWORDS
            if (result.keywords.missing.length > 10) {
                result.issues.push(`Missing ${result.keywords.missing.length} important keywords from job description`);
            } else if (result.keywords.missing.length > 5) {
                result.issues.push(`Missing ${result.keywords.missing.length} keywords - add these naturally to improve match`);
            }

            // OVERALL SCORE (Weighted)
            result.scores.overall = Math.round(
                (result.scores.formatting * 0.20) +
                (result.scores.structure * 0.20) +
                (result.scores.keywords * 0.40) +  // Keywords are most important
                (result.scores.quantified * 0.20)
            );

            return result;
        }

        function extractKeywords(text) {
            const stopWords = new Set([
                'the', 'and', 'for', 'with', 'from', 'have', 'this', 'that', 'will', 'been', 
                'your', 'their', 'into', 'about', 'would', 'there', 'could', 'should', 'other',
                'which', 'when', 'where', 'they', 'what', 'than', 'then', 'these', 'those',
                'some', 'such', 'only', 'also', 'more', 'very', 'must', 'well', 'back', 'through',
                'year', 'years', 'work', 'including', 'within', 'across', 'being'
            ]);

            const words = text.toLowerCase()
                .replace(/[^\w\s]/g, ' ')
                .split(/\s+/)
                .filter(w => w.length > 3 && !stopWords.has(w));

            const freq = {};
            words.forEach(w => {
                freq[w] = (freq[w] || 0) + 1;
            });

            // Return top keywords
            return Object.entries(freq)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 50);
        }

        function displayResults() {
            const getClass = (score) => score >= 80 ? 'excellent' : score >= 60 ? 'good' : 'poor';

            let html = `
                <div class="card">
                    <div class="section-title">üìä Analysis Results</div>
                    
                    <div class="score-grid">
                        <div class="score-card ${getClass(analysis.scores.overall)}">
                            <div class="score-number ${getClass(analysis.scores.overall)}">${analysis.scores.overall}</div>
                            <div class="score-label">Overall Score</div>
                        </div>
                        <div class="score-card ${getClass(analysis.scores.keywords)}">
                            <div class="score-number ${getClass(analysis.scores.keywords)}">${analysis.scores.keywords}%</div>
                            <div class="score-label">Keyword Match</div>
                        </div>
                        <div class="score-card ${getClass(analysis.scores.quantified)}">
                            <div class="score-number ${getClass(analysis.scores.quantified)}">${analysis.scores.quantified}%</div>
                            <div class="score-label">Quantified (${analysis.bulletStats.withMetrics}/${analysis.bulletStats.total})</div>
                        </div>
                        <div class="score-card ${getClass(analysis.scores.structure)}">
                            <div class="score-number ${getClass(analysis.scores.structure)}">${analysis.scores.structure}%</div>
                            <div class="score-label">Structure</div>
                        </div>
                    </div>

                    ${analysis.issues.length > 0 ? `
                    <div class="issue-list">
                        <h3>‚ö†Ô∏è Priority Issues (${analysis.issues.length})</h3>
                        <ul>
                            ${analysis.issues.map(issue => `<li>‚Ä¢ ${issue}</li>`).join('')}
                        </ul>
                    </div>
                    ` : `
                    <div class="info-box" style="background: #f0fdf4; border-color: #22c55e;">
                        <p style="color: #166534;"><strong>‚úÖ Great! No major issues detected.</strong></p>
                    </div>
                    `}

                    ${analysis.formatIssues.length > 0 ? `
                    <div class="issue-list">
                        <h3>üìù Formatting Suggestions (${analysis.formatIssues.length})</h3>
                        <ul>
                            ${analysis.formatIssues.map(issue => `<li>‚Ä¢ ${issue}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}

                    <div class="keyword-grid">
                        <div class="keyword-box matched">
                            <h4>‚úÖ Matched Keywords (${analysis.keywords.matched.length})</h4>
                            <div class="keyword-tags">
                                ${analysis.keywords.matched.slice(0, 20).map(kw => 
                                    `<span class="keyword-tag matched">${kw}</span>`
                                ).join('')}
                                ${analysis.keywords.matched.length > 20 ? `<span class="keyword-tag matched">+${analysis.keywords.matched.length - 20} more</span>` : ''}
                            </div>
                        </div>
                        <div class="keyword-box missing">
                            <h4>‚ùå Missing from Resume (${analysis.keywords.missing.length})</h4>
                            <div class="keyword-tags">
                                ${analysis.keywords.missing.slice(0, 20).map(kw => 
                                    `<span class="keyword-tag missing">${kw}</span>`
                                ).join('')}
                            </div>
                        </div>
                    </div>

                    ${analysis.weakBullets.length > 0 ? `
                    <div class="issue-list">
                        <h3>üí™ Bullets That Need Metrics (${analysis.weakBullets.length} shown)</h3>
                        <ul>
                            ${analysis.weakBullets.map(bullet => `<li>‚Ä¢ ${bullet.substring(0, 150)}${bullet.length > 150 ? '...' : ''}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                </div>

                ${generatePrompts()}
            `;

            document.getElementById('results').innerHTML = html;
        }

        function generatePrompts() {
            const resumeOptPrompt = `You are an expert ATS resume optimizer. Rewrite this resume to maximize ATS compatibility and match the job description.

CURRENT RESUME:
${resumeText}

TARGET JOB DESCRIPTION:
${jdText}

ANALYSIS RESULTS:
- Overall ATS Score: ${analysis.scores.overall}/100
- Keyword Match: ${analysis.scores.keywords}% (${analysis.keywords.matched.length} matched, ${analysis.keywords.missing.length} missing)
- Quantified Bullets: ${analysis.scores.quantified}% (${analysis.bulletStats.withMetrics} of ${analysis.bulletStats.total} have metrics)
- Structure: ${analysis.scores.structure}%

CRITICAL ISSUES TO FIX:
${analysis.issues.length > 0 ? analysis.issues.map(i => `‚Ä¢ ${i}`).join('\n') : '‚Ä¢ No critical issues - focus on optimization'}

${analysis.formatIssues.length > 0 ? `FORMATTING SUGGESTIONS:
${analysis.formatIssues.map(i => `‚Ä¢ ${i}`).join('\n')}` : ''}

MUST ADD THESE KEYWORDS (naturally integrate them):
${analysis.keywords.missing.slice(0, 15).join(', ')}

${analysis.weakBullets.length > 0 ? `BULLETS NEEDING QUANTIFICATION:
${analysis.weakBullets.map(b => `‚Ä¢ ${b}`).join('\n')}` : ''}

YOUR TASK:
1. Rewrite the resume to include ALL missing keywords naturally in context
2. Add specific metrics to bullets without them (percentages, numbers, dollar amounts, timeframes)
3. Use strong action verbs (achieved, spearheaded, optimized, delivered, generated)
4. Ensure clear section headers: EXPERIENCE, EDUCATION, SKILLS, SUMMARY
5. Keep all facts accurate - only improve how they're presented
6. Make it ATS-perfect: simple formatting, standard fonts, no tables/columns
7. Optimize for the target job while keeping it authentic

OUTPUT:
Provide the complete rewritten resume. Use clean formatting:
- Standard section headers in CAPS
- Bullet points with hyphens (-)
- Clear dates (MM/YYYY)
- No special characters or complex formatting`;

            const coverLetterPrompt = `You are an expert cover letter writer. Create a compelling cover letter for this job application.

JOB DESCRIPTION:
${jdText}

CANDIDATE'S BACKGROUND (from resume):
${resumeText.substring(0, 1500)}

KEY MATCHED SKILLS:
${analysis.keywords.matched.slice(0, 15).join(', ')}

COVER LETTER REQUIREMENTS:

STRUCTURE (4 paragraphs max):
1. OPENING: Captivating hook that shows genuine enthusiasm and explains why this specific role/company excites you
2. FIT: Why you're perfect for this role - connect your background to their needs
3. ACHIEVEMENTS: 2-3 key accomplishments with metrics that demonstrate your value
4. CLOSING: Reference resume, express enthusiasm, gracious thank you

TONE: Professional but engaging, confident without arrogance, authentic enthusiasm

CRITICAL RULES:
- Under 3/4 page (350-400 words max)
- MUST end with: "I thank you immensely for your time and consideration."
- Include specific metrics from resume where possible
- Reference the company/role specifically (not generic)
- Complement resume - don't just repeat it

OUTPUT:
Complete, ready-to-send cover letter with proper business letter formatting.`;

            return `
                <div class="card">
                    <div class="section-title">ü§ñ AI Optimization Prompts</div>
                    <div class="info-box">
                        <p><strong>üìã Copy these prompts into Claude.ai or ChatGPT to get your optimized documents.</strong></p>
                        <p style="margin-top: 8px;">Each prompt includes your full resume, the job description, and specific improvements needed based on the analysis above.</p>
                    </div>

                    <div class="prompt-box">
                        <div class="prompt-header">
                            <h3>üìÑ Resume Optimization Prompt</h3>
                            <button class="copy-btn" onclick="copyPrompt('resume')">üìã Copy to Clipboard</button>
                        </div>
                        <div class="prompt-content" id="prompt-resume">${resumeOptPrompt}</div>
                    </div>

                    <div class="prompt-box">
                        <div class="prompt-header">
                            <h3>‚úâÔ∏è Cover Letter Generation Prompt</h3>
                            <button class="copy-btn" onclick="copyPrompt('cover')">üìã Copy to Clipboard</button>
                        </div>
                        <div class="prompt-content" id="prompt-cover">${coverLetterPrompt}</div>
                    </div>

                    <div class="info-box" style="background: #f0fdf4; border-color: #22c55e; margin-top: 20px;">
                        <p><strong>üí° How to Use:</strong></p>
                        <ol style="margin-left: 20px; margin-top: 10px; color: #166534; line-height: 1.8;">
                            <li>Click "Copy to Clipboard" on the Resume Optimization Prompt</li>
                            <li>Go to <a href="https://claude.ai" target="_blank" style="color: #166534; font-weight: bold;">Claude.ai</a> or <a href="https://chat.openai.com" target="_blank" style="color: #166534; font-weight: bold;">ChatGPT</a></li>
                            <li>Paste the prompt and submit</li>
                            <li>Get your ATS-optimized resume back</li>
                            <li>Repeat for cover letter</li>
                            <li>Review, tweak if needed, and apply! üöÄ</li>
                        </ol>
                    </div>
                </div>
            `;
        }

        function copyPrompt(type) {
            const text = document.getElementById(`prompt-${type}`).textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                btn.style.background = '#22c55e';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#667eea';
                }, 2000);
            });
        }

        // Initialize
        updateAnalyzeButton();
    </script>
</body>
</html>
